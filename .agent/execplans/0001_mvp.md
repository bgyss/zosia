# 0001_mvp.md

## ExecPlan: zosia (QEMU + aarch64)

### 0) Success criteria

- `./scripts/run-qemu-aarch64.sh` boots to an interactive prompt.
- Prompt accepts input and streams tokens back.
- Clean shutdown via Ctrl+C -> poweroff (or a dedicated command).

### 1) Research/inputs

- Confirm gpt-oss-20b model sources and recommended GGUF variants.
- Confirm llama.cpp invocation flags for chat template + streaming.

### 2) Build artifacts

A) Buildroot output:

- Linux kernel Image
- initramfs.cpio.gz containing:
  - /bin/busybox (static)
  - /bin/llama-cli (or /bin/llama)
  - /init script
B) Model disk image:
- ext4 image mounted at /models containing model.gguf

### 3) Initramfs behavior

/init must:

- mount -t proc proc /proc
- mount -t sysfs sys /sys
- mount -t devtmpfs dev /dev
- mount model disk (virtio-blk) to /models
- exec llama-cli pointing at /models/model.gguf on /dev/console
- on exit, poweroff

### 4) QEMU integration (macOS)

- Use qemu-system-aarch64, machine=virt, cpu=max, serial=stdio, nographic.
- Provide scripts to:
  - download/build dependencies
  - build kernel+initramfs
  - create model disk
  - run VM

### 5) Testing

- Smoke test boot on CI (Linux runner, qemu-aarch64) without model (stub binary).
- Local test with model present.
- Validate memory usage and failure modes (missing disk, missing model, insufficient RAM).

### 6) README.md

- Document build process.
- Document QEMU run process.
- Document shutdown process.

### 7) Docs (MkDocs)

- Add MkDocs config and docs skeleton:
  - mkdocs.yml
  - docs/index.md
  - docs/quickstart.md (install/build/run)
  - docs/architecture.md (boot flow: QEMU -> kernel -> initramfs -> llama-cli)
  - docs/troubleshooting.md (missing disk/model, RAM issues, serial console tips)
- Ensure README.md links to the docs (local MkDocs + rendered site if applicable).
- Add a simple validation step:
  - `mkdocs build` succeeds in CI (or at least locally as part of the MVP workflow).

### 8) Stretch goals

- Add a tiny TUI (readline) wrapper.
- Add x86_64 build via Buildroot defconfig.
- Optional: package as ISO via GRUB for easier use in VirtualBox/Parallels.
